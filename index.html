<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.7/css/all.css">
    <link rel="stylesheet" href="style.css">
    <title>Bookstore for your needs!</title>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
    <div id="nav" class="container">
        <!--Navigation bar-->
        <div class="row">
            <div class="col-6">
                <h1 id="title">Bookstore</h1>
                </div>   
            <div class="col-2">
                <a href="#">Home</a>
            </div>
            <div class="col-2">
                <a href="Books.html">Books</a>
            </div>
            <div class="col-2">
                <a href="About.html">About us</a>
            </div>
        </div>
    </div>
    <div style="color:rgba(255, 255, 255, 0.342);height:10px;width:80%;border-color:rgba(255, 255, 255, 0.774);border-style:solid;border-width:0 0 1px;margin:0 10%;padding:0;"></div>
<main>
    <div class="container">
        <div class="row justify-content-md-center">
            <div class="col">
                <!--Search bar-->
                <h2 id="title2">Search for your favourite books!</h2>
                <form id="form1"><input type="text" name="keywords" id="input" onkeyup="myFunction()" placeholder="Search by name or author"></input><button onclick="window.location.href='Books.html';" type="button" class="submit"><i class="fas fa-search"></i></button></form>
                <br>
                <p id="output"></p>
            <script>
                //Connect to XML file
                $(document).ready(function(){
                $('#input').on('keyup', function(){
                $.ajax({
                type: "GET",
                url: "books.xml",
                dataType: "xml",
                success: parseXML
                    });
                });
            });
                //Use #input data to search for ocurrences in XML data and then display it in #output (Title and Description only)
            function parseXML(xml){
                var searchFor = $('#input').val();
                var reg = new RegExp(searchFor, "i");
                $(xml).find('Book').each(function()
                {
                    var title = $(this).find('Title').text();
                    var titleSearch = title.search(reg);
                    var author = $(this).find('Author').text();
                    var authorSearch = author.search(reg);
                    $('#output').empty();
                    if(titleSearch > -1){
                        $('#output').append('Found <i>'+searchFor+'<\/i> in title: '+title.replace(reg, '<b>'+searchFor+'</b>')+'<br \/>');
                    }
                    if(authorSearch > -1){
                        $('#output').append('Found <i>'+searchFor+'<\/i> in author: '+author.replace(reg, '<b>'+searchFor+'</b>')+'<br \/>');
                    }
                });    
                }
            </script>
            </div>
        </div>
    </div>  
    <div id="white">
            <!--List of books--> 
            <h3>Recomended for you:</h3>
            <br>
            <div class="container">
                <div class="row justify-content-md-center" id="items1">
                    <div class="col-4">
                        <a href="Books.html#1">
                        <img src="img/41fk+mxMLbL._AC_SX184_.jpg" alt="">
                        <br>
                        <strong class="title">Sooley: A Novel</strong>
                        <br>
                        <i class="author">John Grisham</i>
                        <br>
                      </a>
                    </div>
                    <div class="col-4">
                        <a href="Books.html#2">
                        <img src="img/41swQHt2NPL._AC_SX184_.jpg" alt="">
                        <br>
                        <strong class="title">The Hill We Climb</strong>
                        <br>
                        <i class="author">Amanda Gorman, Oprah Winfrey</i>
                        <br>
                    </a>
                    </div> 
                    <div class="col-4">
                        <a href="Books.html#3">
                        <img src="img/51N91YC4XsL._AC_SX184_.jpg" alt="">
                        <br>
                        <strong class="title">Later</strong>
                        <br>
                        <i class="author">Stephen King</i>
                        <br>
                    </a>
                    </div>
                </div>
                <hr id="hr1">
                <div class="row justify-content-md-center" id="items2">
                    <div class="col-4">
                        <a href="Books.html#4">
                        <img src="img/514aE49swxL._AC_SX184_.jpg" alt="">
                        <br>
                        <strong class="title">The Song of Achilles: A Novel</strong>
                        <br>
                        <i class="author">Madeline Miller</i>
                        <br>
                    </a>
                    </div>
                    <div class="col-4">
                        <a href="Books.html#5">
                        <img src="img/51PujYOdzLL._AC_SX184_.jpg" alt="">
                        <br>
                        <strong class="title">Atomic Habits: An Easy & Proven Way to Build Good Habits & Break Bad Ones</strong>
                        <br>
                        <i class="author">James Clear</i>
                        <br>
                    </a>
                    </div>
                    <div class="col-4">
                        <a href="Books.html#6">
                        <img src="img/41aLavFzFmL._SX311_BO1,204,203,200_.jpg" alt="">
                        <br>
                        <strong class="title">Clarity & Connection</strong>
                        <br>                     	
                        <i class="author">Yung Pueblo</i>
                        <br>
                    </a>
                    </div>
                </div>
                <hr id="hr2">
                <div class="row justify-content-md-center" id="items3">
                    <div class="col-4">
                        <a href="Books.html#7">
                        <img src="img/41U5YZ6dngL._SX370_BO1,204,203,200_.jpg" alt="">
                        <br>
                        <strong class="title">Vegetable Simple: A Cookbook</strong>
                        <br>
                        <i class="author">Eric Ripert</i>
                        <br>
                        </a>
                    </div>
                    <div class="col-4">
                        <a href="Books.html#8">
                        <img src="img/41LO6QRvIuL._SX331_BO1,204,203,200_.jpg" alt="">
                        <br>
                        <strong class="title">Outliers: The Story of Success</strong>
                        <br>	
                        <i class="author">Malcolm Gladwell</i>
                        <br>
                    </a>
                    </div>
                    <div class="col-4">
                    <a href="Books.html#9">
                        <img src="img/413mmfnu7YL._SX322_BO1,204,203,200_.jpg" alt="">
                        <br>
                        <strong class="title">Effortless: Make It Easier to Do What Matters Most</strong>
                        <br>
                        <i class="author">Greg McKeown</i>
                        <br>
                    </a>
                    </div>
                </div>
                <hr id="hr3">
                <br>
            </div>
    </div>
    <script>
        //Filter elements by title or author. Other elements are hidden while the requested one is shown.
        function myFunction() 
        {
            var input, filter, col, items, a, title, author, i, hr;
            //row 1
            hr = document.getElementById("hr1");
            input = document.getElementById("input");
            filter = input.value.toUpperCase();
            items = document.getElementById("items1");
            col = items.getElementsByClassName("col-4");
            for (i = 0; i < col.length; i++) {
                title = col[i].querySelector("strong.title");
                author = col[i].querySelector("i.author");
                if (title.innerText.toUpperCase().indexOf(filter) > -1 || author.innerText.toUpperCase().indexOf(filter) > -1) {
                    col[i].style.display = "";
                    hr.style.display = "";
                } else {
                    col[i].style.display = "none";
                    hr.style.display = "none";
                }
            }
            //row 2
            hr = document.getElementById("hr2");
            items = document.getElementById("items2");
            col = items.getElementsByClassName("col-4");
            for (i = 0; i < col.length; i++) {
                title = col[i].querySelector("strong.title");
                author = col[i].querySelector("i.author");
                if (title.innerText.toUpperCase().indexOf(filter) > -1 || author.innerText.toUpperCase().indexOf(filter) > -1) {
                    col[i].style.display = "";
                    hr.style.display = "";
                } else {
                    col[i].style.display = "none";
                    hr.style.display = "none";
                }
            }
            //row 3
            hr = document.getElementById("hr3");
            items = document.getElementById("items3");
            col = items.getElementsByClassName("col-4");
            for (i = 0; i < col.length; i++) {
                title = col[i].querySelector("strong.title");
                author = col[i].querySelector("i.author");
                if (title.innerText.toUpperCase().indexOf(filter) > -1 || author.innerText.toUpperCase().indexOf(filter) > -1) {
                    col[i].style.display = "";
                    hr.style.display = "";
                } else {
                    col[i].style.display = "none";
                    hr.style.display = "none";
                }
            }
        }
    </script>
</main>
    
<footer>
    <span>Â© Matija Dolenec <script>document.write( new Date().getUTCFullYear() );</script></span>
</footer>
</body>

</html>
